(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=t(5),u=t(4),o=t(2),l=t(3),i=t.n(l),s="/api/people",d={getAll:function(){return i.a.get(s)},getOne:function(e){return i.a.get("".concat(s,"/").concat(e))},create:function(e){return i.a.post(s,e)},update:function(e,n){return i.a.put("".concat(s,"/").concat(e),n)},deleteOne:function(e){return i.a.delete("".concat(s,"/").concat(e))}},j=t(0),b=function(e){var n=e.message;return null===n?null:(console.log(n),Object(j.jsx)("div",{className:n.type,children:n.text}))},h=function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:"Add people"}),Object(j.jsxs)("form",{onSubmit:e.addPerson,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(j.jsx)("br",{}),"number: ",Object(j.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})]})},f=function(e){var n=e.value,t=e.onChange;return Object(j.jsxs)(j.Fragment,{children:["filter shown with  ",Object(j.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.people,t=e.handleDelete;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:"People and their numbers"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)(O,{person:e,handleDelete:t},e.name)}))})]})},O=function(e){var n=e.person,t=e.handleDelete;return Object(j.jsxs)("li",{children:[n.name," ",n.number," ",Object(j.jsx)(p,{handleDelete:function(e){return t(e,n)}})]})},p=function(e){var n=e.handleDelete;e.value;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{onClick:n,children:"delete"})})},g=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),l=Object(u.a)(a,2),i=l[0],s=l[1],O=Object(o.useState)(""),p=Object(u.a)(O,2),g=p[0],x=p[1],v=Object(o.useState)(""),w=Object(u.a)(v,2),y=w[0],C=w[1],N=Object(o.useState)({}),S=Object(u.a)(N,2),D=S[0],F=S[1];Object(o.useEffect)((function(){d.getAll().then((function(e){return c(e.data)}))}),[]);var k=function(e,n){F({text:e,type:n}),setTimeout((function(){return F(null)}),5e3)},A=y?t.filter((function(e){return e.name.toLowerCase().includes(y)})):t;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(b,{message:D}),Object(j.jsx)(f,{value:y,onChange:function(e){console.log(e.target.value),C(e.target.value.toLowerCase())}}),Object(j.jsx)(h,{addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(i)){if(window.confirm("".concat(i," already in DB, do you want to update the phone number?"))){c(t.map((function(e){return e.name===i?Object(r.a)(Object(r.a)({},e),{},{number:g}):e}))),console.log(t);var n=t.find((function(e){return e.name===i}));console.log(n),d.update(n.id,Object(r.a)(Object(r.a)({},n),{},{number:g})).then((function(e){return console.log(e.data)})).then((function(){return k("Successfully updated ".concat(n.name),"success")}))}}else{var a={name:i,number:g};d.create(a).then((function(e){console.log("Adding person ".concat(JSON.stringify(e.data))),c(t.concat(e.data))})).then((function(){return k("Successfully added ".concat(a.name),"success")}))}s(""),x("")},newName:i,newNumber:g,handleNameChange:function(e){return s(e.target.value)},handleNumberChange:function(e){return x(e.target.value)}}),Object(j.jsx)(m,{people:A,handleDelete:function(e,n){console.log("Deleting now: ".concat(JSON.stringify(n))),window.confirm("Delete ".concat(n.name,"?"))&&d.deleteOne(n.id).then(c(t.filter((function(e){return e.id!==n.id})))).then((function(){return k("Successfully deleted ".concat(n.name),"success")})).catch((function(e){console.log(e),k("Failed to delete ".concat(n.name,", it was probably deleted from the server"),"error")}))}})]})};t(39);a.a.render(Object(j.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.de0d5296.chunk.js.map